{% extends "app/layout.html" %}
{% block content %}
{% if isNoHits %}
<h2>No Hits Found</h2>
<!--<h3>No hits found on your query. <a href="{% url 'blast:create' %}">Try another.</a></h3>-->
<h3>No hits found on your query. <a href="../blast">Try another.</a></h3>
{% elif isExpired %}
<h2>Query Expired</h2>
<h3>Submission time: {{ enqueue_date }}</h3>
<!--<p>Your query is expired. Please <a href="{% url 'blast:create' %}">try another query.</a></p>-->
<p>Your query is expired. Please <a href="../blast">try another query.</a></p>
{% else %}
<h2>Query Submitted</h2>
<h3>Submission time: {{ enqueue_date }}</h3>
<p>Your query is running. Please wait a moment or <a href="{% url 'blast:retrieve' task_id %}">link back to this page</a> later to check results</p>
{% endif %}
{% endblock %}
{% block scripts %}
{% if not isExpired and not isNoHits %}
<script>
$(document).ready(function () {
setInterval( function(){retrieve();},2000);
});
function retrieve() {
$.ajax({
type: 'GET',
url: './{{task_id}}/status',
dataType: "json",
error: function (){
// do nothing
},
success: function (data) {
    //console.log(data['status']);
    if (data['status'] == 'done') {
        window.location.reload(1);
    }
}
});
};
</script>
{% endif %}
{% endblock %}
